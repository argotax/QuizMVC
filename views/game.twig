{% extends 'layout.twig' %}

{% block css %}
  <link rel="stylesheet" href="/stylesheet/game.css">
  <link rel="stylesheet" href="/stylesheet/friend.css">
{% endblock %}

{% block body %}
  <div class="block-main" id="blockMain">

    <a style="color:white;position:absolute" href="/parties">Retour</a>

    <div class="block-header">
      <div class="login px-2">
        {% if login is defined %}{{login|capitalize}}{% endif %}
      </div>
      <div class="container-i profile px-3"><i class="fa fa-user fa-2x" aria-hidden="true"></i></div>
      <div class="container-i left px-4" onclick="displayFriend()"><i class="fa fa-caret-left fa-2x" id="leftArrow" aria-hidden="true"></i></div>
    </div>

    <div class="block-main" id="question1">
      <div class="block-question">
        <div class="question">{{question[0].question_label}}</div>
      </div>
      <div class="block-answer">
        <div class="answer" onclick="verifAnswer(0)">{{answer[0].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(1)">{{answer[1].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(2)">{{answer[2].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(3)">{{answer[3].answer_label}}</div>
      </div>
    </div>

    <div class="block-main" id="question2">
      <div class="block-question">
        <div class="question">{{question[1].question_label}}</div>
      </div>
      <div class="block-answer">
        <div class="answer" onclick="verifAnswer(4)">{{answer[4].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(5)">{{answer[5].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(6)">{{answer[6].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(7)">{{answer[7].answer_label}}</div>
      </div>
    </div>

    <div class="block-main" id="question3">
      <div class="block-question">
        <div class="question">{{question[2].question_label}}</div>
      </div>
      <div class="block-answer">
        <div class="answer" onclick="verifAnswer(8)">{{answer[8].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(9)">{{answer[9].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(10)">{{answer[10].answer_label}}</div>
        <div class="answer" onclick="verifAnswer(11)">{{answer[11].answer_label}}</div>
      </div>
    </div>

    {% include 'friend.twig' %}

  </div>
{% endblock %}

{% block script%}
  <script src= "/vendors/socket.io/socket.io.js"></script>
  <script src= "/vendors/list/list.min.js" charset="utf-8"></script>
  <script src= "/javascript/friend.js"></script>
  <script type="text/javascript">
    var answer = [[],[],[],[],[],[],[],[],[],[],[],[]];

    answer[0][0] = {{ answer[0].answer_id }};
    answer[0][1] = {{ answer[0].answer_question }};
    answer[0][2] = '{{ answer[0].answer_label }}';
    answer[0][3] = '{{ answer[0].answer_image }}';
    answer[0][4] = {{ answer[0].answer_status }};


    answer[1][0] = {{ answer[1].answer_id }};
    answer[1][1] = {{ answer[1].answer_question }};
    answer[1][2] = '{{ answer[1].answer_label }}';
    answer[1][3] = '{{ answer[1].answer_image }}';
    answer[1][4] = {{ answer[1].answer_status }};

    answer[2][0] = {{ answer[2].answer_id }};
    answer[2][1] = {{ answer[2].answer_question }};
    answer[2][2] = '{{ answer[2].answer_label }}';
    answer[2][3] = '{{ answer[2].answer_image }}';
    answer[2][4] = {{ answer[2].answer_status }};

    answer[3][0] = {{ answer[3].answer_id }};
    answer[3][1] = {{ answer[3].answer_question }};
    answer[3][2] = '{{ answer[3].answer_label }}';
    answer[3][3] = '{{ answer[3].answer_image }}';
    answer[3][4] = {{ answer[3].answer_status }};

    answer[4][0] = {{ answer[4].answer_id }};
    answer[4][1] = {{ answer[4].answer_question }};
    answer[4][2] = '{{ answer[4].answer_label }}';
    answer[4][3] = '{{ answer[4].answer_image }}';
    answer[4][4] = {{ answer[4].answer_status }};

    answer[5][0] = {{ answer[5].answer_id }};
    answer[5][1] = {{ answer[5].answer_question }};
    answer[5][2] = '{{ answer[5].answer_label }}';
    answer[5][3] = '{{ answer[5].answer_image }}';
    answer[5][4] = {{ answer[5].answer_status }};

    answer[6][0] = {{ answer[6].answer_id }};
    answer[6][1] = {{ answer[6].answer_question }};
    answer[6][2] = '{{ answer[6].answer_label }}';
    answer[6][3] = '{{ answer[6].answer_image }}';
    answer[6][4] = {{ answer[6].answer_status }};

    answer[7][0] = {{ answer[7].answer_id }};
    answer[7][1] = {{ answer[7].answer_question }};
    answer[7][2] = '{{ answer[7].answer_label }}';
    answer[7][3] = '{{ answer[7].answer_image }}';
    answer[7][4] = {{ answer[7].answer_status }};

    answer[8][0] = {{ answer[8].answer_id }};
    answer[8][1] = {{ answer[8].answer_question }};
    answer[8][2] = '{{ answer[8].answer_label }}';
    answer[8][3] = '{{ answer[8].answer_image }}';
    answer[8][4] = {{ answer[8].answer_status }};

    answer[9][0] = {{ answer[9].answer_id }};
    answer[9][1] = {{ answer[9].answer_question }};
    answer[9][2] = '{{ answer[9].answer_label }}';
    answer[9][3] = '{{ answer[9].answer_image }}';
    answer[9][4] = {{ answer[9].answer_status }};

    answer[10][0] = {{ answer[10].answer_id }};
    answer[10][1] = {{ answer[10].answer_question }};
    answer[10][2] = '{{ answer[10].answer_label }}';
    answer[10][3] = '{{ answer[10].answer_image }}';
    answer[10][4] = {{ answer[10].answer_status }};

    answer[11][0] = {{ answer[11].answer_id }};
    answer[11][1] = {{ answer[11].answer_question }};
    answer[11][2] = '{{ answer[11].answer_label }}';
    answer[11][3] = '{{ answer[11].answer_image }}';
    answer[11][4] = {{ answer[11].answer_status }};
  </script>

  <script type="text/javascript">

    var socket = io.connect('http://192.168.1.13:3000');

    var lock = false;
    var tabResult = [];
    var compteur = 0;

    function verifAnswer(id){
      if (answer[id][4] == 7 && lock == false) {
        tabResult[compteur] = 7;
        document.getElementsByClassName("answer")[id].style.backgroundColor = "green";
        lock = true;
        setTimeout(function(){
          document.getElementById("question"+(compteur+1)).style.display = "none";
          document.getElementById("question"+(compteur+2)).style.display = "block";
          compteur++;
          lock = false
        }, 2000);
      } else if (lock == false) {
        tabResult[compteur] = 8;
        document.getElementsByClassName("answer")[id].style.backgroundColor = "red";
        lock = true;
        setTimeout(function(){
          document.getElementById("question"+(compteur+1)).style.display = "none";
          document.getElementById("question"+(compteur+2)).style.display = "block";
          compteur++;
          lock = false
        }, 2000);
      }
      if (compteur == 2) {
        socket.emit('player-answer', { answer:tabResult, id:{{id}}, round:{{round}}, game:{{game}} });
        window.location.href = "../../";
      }
    }

    setTimeout(function(){
      if (compteur==0) {
        tabResult[compteur] = 14;
        document.getElementById("question1").style.display = "none";
        document.getElementById("question2").style.display = "block";
        compteur++;
        lock = false
      }
    }, 5000);
    setTimeout(function(){
      if (compteur==1) {
        tabResult[compteur] = 14;
        document.getElementById("question2").style.display = "none";
        document.getElementById("question3").style.display = "block";
        compteur++;
        lock = false
      }
    }, 10000);
    setTimeout(function(){
      if (compteur==2) {
        tabResult[compteur] = 14;
      }
      window.location.href = "../../";
    }, 15000);

  </script>
{% endblock %}


















<!---->
